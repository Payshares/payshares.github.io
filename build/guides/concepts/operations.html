<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!--

  Want to contribute to this site? Take a look at the GitHub repository for this
  site: https://github.com/payshares/developers

  -->
  <title>Operations | Payshares Developers</title>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <meta name="author" content="Payshares.org and contributors">

  <meta property="og:title" content="Operations | Payshares Developers">
  <meta property="og:type" content="website">


  <link rel="stylesheet" href="/styles/index-642cd6cc68250700f4daa5029026a066.css">

  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/rocket-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/rocket-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/rocket-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicon/rocket-96x96.png" sizes="96x96">
  <meta name="msapplication-TileImage" content="/images/favicon/rocket-144x144.png">

  <script type="text/javascript">
    var $mcGoal = {'settings':{'uuid':'c001d97369b7a10d224c23867','dc':'us9'}};
    (function() {
      var sp = document.createElement('script'); sp.type = 'text/javascript'; sp.async = true; sp.defer = true;
      sp.src = ('https:' == document.location.protocol ? 'https://s3.amazonaws.com/downloads.mailchimp.com' : 'http://downloads.mailchimp.com') + '/js/goal.min.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sp, s);
    })();
  </script>

  <script>window.clientData = {};</script>

  <script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName("script")[0];
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
</head>
<body>
<div class="header2016">
  <div class="header2016__logo header2016__logo--spaced">
    <div class="so-siteHeader">
      <span class="so-logo">
  <a href="https://www.payshares.org/" class="so-logo__main">Payshares</a><!--
  --><span class="so-logo__separator"> </span><!--
  --><a href="/" class="so-logo__subSite">developers</a>
</span>
    </div>
  </div>
  <nav class="header2016__nav mainNavMenu spu-padStart-30">
    <a class="mainNavMenu__item is-currentItem" href="/guides/">Guides</a>
<a class="mainNavMenu__item " href="/reference/">API Reference</a>
<a class="mainNavMenu__item " href="/software/">Software</a>
<a class="mainNavMenu__item " href="/tools/">Tools</a>
  </nav>
</div>

<div class="S-flex-row">
  <div class="siteSidebar pageNavListBounder">
  <div class="mainSidebar">
    <ul class="pageNavList">

      <li class="pageNavList__subList">
        <span class="pageNavList__title">Get Started</span>
        <ol class="collapsibleListSet__list">
                    <li class="pageNavList__item"><a href="/guides/get-started/index.html">Payshares Network Overview</a></li>
          <li class="pageNavList__item"><a href="/guides/get-started/create-account.html">Create an Account</a></li>
  <li class="pageNavList__item"><a href="/guides/get-started/transactions.html">Send and Receive Money</a></li>

        </ol>
      </li>
    


      <li class="pageNavList__subList">
        <span class="pageNavList__title">Become an Anchor</span>
        <ol class="collapsibleListSet__list">
                    <li class="pageNavList__item"><a href="/guides/anchor/index.html">Architecture</a></li>
          <li class="pageNavList__item"><a href="/guides/anchor/2-bridge-server.html">Bridge Server</a></li>
  <li class="pageNavList__item"><a href="/guides/anchor/3-federation-server.html">Federation Server</a></li>
  <li class="pageNavList__item"><a href="/guides/anchor/4-compliance-server.html">Compliance Server</a></li>
  <li class="pageNavList__item"><a href="/guides/anchor/5-conclusion.html">Next Steps</a></li>

        </ol>
      </li>
    
      
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Concepts</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/guides/concepts/accounts.html">Accounts</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/assets.html">Assets</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/exchange.html">Distributed Exchange</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/federation.html">Federation</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/fees.html">Fees</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/inflation.html">Inflation</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/ledger.html">Ledger</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/list-of-operations.html">List of Operations</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/multi-sig.html">Multisignature</a></li>
  <li class="pageNavList__item is-currentItem"><a href="/guides/concepts/operations.html">Operations</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/scp.html">Payshares Consensus Protocol</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/stellar-toml.html">Payshares.toml</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/test-net.html">Testnet</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/transactions.html">Transactions</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/versioning.html">Versioning and Upgrading</a></li>
  <li class="pageNavList__item"><a href="/guides/concepts/xdr.html">XDR</a></li>

        </ul>
      </li>
    
        <li class="pageNavList__item"><a href="/guides/attachment.html">Payshares Attachment Convention</a></li>
  <li class="pageNavList__item"><a href="/guides/channels.html">Channels</a></li>
  <li class="pageNavList__item"><a href="/guides/compliance-protocol.html">Compliance Protocol</a></li>
  <li class="pageNavList__item"><a href="/guides/issuing-assets.html">Issuing Assets</a></li>
  <li class="pageNavList__item"><a href="/guides/security.html">Security</a></li>
  <li class="pageNavList__item"><a href="/guides/things-to-build.html">Build Payshares Apps</a></li>
        <li class="pageNavList__item"><a href="/guides/contributing.html">Contribution Guide</a></li>
    </ul>
  </div>
</div>
  <div class="S-flexItem-share">
  <div class="spu-padSE-30">
    <h1 class="mainSectionTitle">
      Operations
      
    </h1>
  </div>
  <div class="S-flex-rowWrap spu-borderTop-1 spu-borderColor-neutral7">
    <s-read-md class="S-flexItem-share mainContent s-read-md--capped spu-padSE-30 spu-padTB-20 documentRead" link-process-md>
      <p><a href="./transactions.html">Transactions</a> are made up of a <a href="./list-of-operations.html">list of operations</a>. Each
operation is an individual command that mutates the ledger.</p>
<p>Here are the possible operation types:</p>
<ul>
<li><a href="./list-of-operations.html#create-account">Create Account</a></li>
<li><a href="./list-of-operations.html#payment">Payment</a></li>
<li><a href="./list-of-operations.html#path-payment">Path Payment</a></li>
<li><a href="./list-of-operations.html#manage-offer">Manage Offer</a></li>
<li><a href="./list-of-operations.html#create-passive-offer">Create Passive Offer</a></li>
<li><a href="./list-of-operations.html#set-options">Set Options</a></li>
<li><a href="./list-of-operations.html#change-trust">Change Trust</a></li>
<li><a href="./list-of-operations.html#allow-trust">Allow Trust</a></li>
<li><a href="./list-of-operations.html#account-merge">Account Merge</a></li>
<li><a href="./list-of-operations.html#inflation">Inflation</a></li>
<li><a href="./list-of-operations.html#manage-data">Manage Data</a></li>
</ul>
<p>Operations are executed on behalf of the source account specified in the
transaction, unless there is an override defined for the operation.</p>
<h2 id="thresholds"><a class="anchorShortcut" href="#thresholds" aria-hidden="true"></a> Thresholds</h2>
<p>Each operation falls under a specific threshold category: low, medium, or high.
Thresholds define the level of privilege an operation needs in order to succeed.</p>
<ul>
<li>Low Security:
<ul>
<li>AllowTrustTx</li>
<li>Used to allow other signers to allow people to hold credit from this
account but not issue credit.</li>
</ul>
</li>
<li>Medium Security:
<ul>
<li>All else</li>
</ul>
</li>
<li>High Security:
<ul>
<li>SetOptions for Signer and threshold</li>
<li>Used to change the Set of signers and the thresholds.</li>
</ul>
</li>
</ul>
<h2 id="validity-of-an-operation"><a class="anchorShortcut" href="#validity-of-an-operation" aria-hidden="true"></a> Validity of an operation</h2>
<p>There are two places in a <a href="./transactions.html#life-cycle">transaction life cycle</a> when operations can fail. The first time is when a transaction is submitted to the network. The node to which the transaction is submitted checks the validity of the operation: in the <strong>validity check</strong>, the node performs some cursory checks to make sure the transaction is properly formed before including it in its transaction set and forwarding the transaction to the rest of the network.</p>
<p>The validity check only looks at the state of the source account. It ensures that:</p>
<ol>
<li>the outer transaction has enough signatures for the source account of the operation to meet the threshold for that operation.</li>
<li>Operations-specific validity checks pass. These checks are ones that would stay true regardless of the ledger state&#x2014;for example, are the parameters within the expected bounds? Checks that depend on ledger state don&#x2019;t happen until apply time&#x2014;for example, a send operation won&#x2019;t check if you have enough balance to send until apply time.</li>
</ol>
<p>Once a transaction passes this first validity check, it is propagated to the network and eventually included in a transaction set. As part of a transaction set, the transaction is applied to the ledger. At that point a fee is taken from the source account. Operations are attempted in the order they occur in the transaction. If any operation fails, the whole transaction fails and the effects of previous operations are rolled back.</p>
<h2 id="result"><a class="anchorShortcut" href="#result" aria-hidden="true"></a> Result</h2>
<p>For each operation, there is a matching result type. In the case of success, this result allows users to gather information about the effects of the operation. In the case of failure, it allows users to learn more about the error.</p>
<p>Payshares Core queues results in the txhistory table for other components to derive data from. This txhistory table is used by the history module in Payshares Core for uploading the history into long-term storage. It can also be used by external processes such as Horizon to gather the network history they need.</p>
<h2 id="transactions-involving-multiple-accounts"><a class="anchorShortcut" href="#transactions-involving-multiple-accounts" aria-hidden="true"></a> Transactions involving multiple accounts</h2>
<p>Typically transactions only involve operations on a single account. For example, if account A wanted to send stakks to account B, only account A needs to authorize the transaction.</p>
<p>It&#x2019;s possible, however, to compose a transaction that includes operations on multiple accounts. In this case, to authorize the operations, the transaction envelope must include signatures of every account in question. For example, you can make a transaction where accounts A and B both send to account C. This transaction would need authorization from both account A and B before it&#x2019;s submitted to the network.</p>
<h2 id="examples"><a class="anchorShortcut" href="#examples" aria-hidden="true"></a> Examples</h2>
<h3 id="1-exchange-without-third-party"><a class="anchorShortcut" href="#1-exchange-without-third-party" aria-hidden="true"></a> 1. Exchange without third party</h3>
<p>Anush wants to send Bridget some XPS (Operation 1) in exchange for BTC (Operation 2).</p>
<p>A transaction is constructed:</p>
<ul>
<li>source = <code>Anush_account</code></li>
<li>Operation 1
<ul>
<li>source = <em>null</em></li>
<li>Payment send XPS --&gt; <code>Bridget_account</code></li>
</ul>
</li>
<li>Operation 2
<ul>
<li>source = _<code>Bridget_account</code></li>
<li>Payment send BTC --&gt; <code>Anush_account</code></li>
</ul>
</li>
</ul>
<p>Signatures required:</p>
<ul>
<li>Operation 1: requires signatures from <code>Anush_account</code> (the operation inherits
the source account from the transaction) to meet medium threshold</li>
<li>Operation 2: requires signatures for <code>Bridget_account</code> to meet medium threshold</li>
<li>The transaction requires signatures for <code>Anush_account</code> to meet low threshold since <code>Anush_account</code> is the
source for the entire transaction.</li>
</ul>
<p>Therefore, if both <code>Anush_account</code> and <code>Bridget_account</code> sign the transaction, it will be validated.<br>
Other, more complex ways of submitting this transaction are possible, but signing with those two accounts is sufficient.</p>
<h3 id="2-workers"><a class="anchorShortcut" href="#2-workers" aria-hidden="true"></a> 2. Workers</h3>
<p>An anchor wants to divide the processing of their online (&#x201C;base&#x201D;) account between machines. That way, each machine will submit transactions from its local account and keep track of its own sequence number. For more on transaction sequence numbers, please refer to <a href="./transactions.html">the transactions doc</a>.</p>
<ul>
<li>Each machine gets a private/key pair associated with it. Let&#x2019;s say there are only 3 machines: Machine_1, Machine_2, and Machine_3. (In practice, there can be as many machines as the anchor wants.)</li>
<li>All three machines are added as Signers to the anchor&#x2019;s base account &#x201C;baseAccount&#x201D;, with
a weight that gives them medium rights. The worker machines can then sign on behalf of the base account. (For more on signing, please refer to the <a href="multi-sig.html">multisig documentation</a>.)</li>
<li>When a machine (say Machine_2) wants to submit a transaction to the network, it constructs the transaction:
<ul>
<li>source=<em>public key for Machine_2</em></li>
<li>sequence number=<em>sequence number of Machine_2&#x2019;s account</em></li>
<li>Operation
<ul>
<li>source=<em>baseAccount</em></li>
<li>Payment send an asset --&gt; destination account</li>
</ul>
</li>
</ul>
</li>
<li>sign it with the private key of Machine_2.</li>
</ul>
<p>The benefit of this scheme is that each machine can increment its sequence number and submit a transaction without invalidating any transactions submitted by the other machines.  Recall from the <a href="transactions.html">transactions doc</a> that all transactions from a source account have their own specific sequence number.  Using worker machines, each with an account, allows this anchor to submit as many transactions as possible without sequence number collisions.</p>
<h3 id="3-long-lived-transactions"><a class="anchorShortcut" href="#3-long-lived-transactions" aria-hidden="true"></a> 3. Long-lived transactions</h3>
<p>Transactions that require multiple parties to sign, such as the exchange transaction between Anush and Bridget from example #1, can take an arbitrarily long time. Because all transactions are constructed with specific sequence numbers, waiting on the signatures can block Anush&#x2019;s account. To avoid this situation, a scheme similar to Example #2 can be used.</p>
<p>Anush would create a temporary account <code>Anush_temp</code>, fund <code>Anush_temp</code> with XPS, and add the <code>Anush_account</code> public key as signer to <code>Anush_temp</code> with a weight crossing at least the low threshold.</p>
<p>A transaction is then constructed:</p>
<ul>
<li>source=<em>Anush_temp</em></li>
<li>sequence number=<em>Anush_temp seq num</em></li>
<li>Operation 1
<ul>
<li>source=<em>Anush_account</em></li>
<li>Payment send XPS -&gt; Bridget_account</li>
</ul>
</li>
<li>Operation 2
<ul>
<li>source=<em>Bridget_account</em></li>
<li>Payment send BTC -&gt; Anush_account</li>
</ul>
</li>
</ul>
<p>The transaction would have to be signed by both Anush_account and Bridget_account, but the sequence
number consumed will be from account Anush_temp.</p>
<p>If <code>Anush_account</code> wants to recover the XPS balance from <code>Anush_temp</code>, an additional operation &#x201C;Operation 3&#x201D; can be included in the transaction. If you want to do this, <code>Anush_temp</code> must add <code>Anush_account</code> as a signer with a weight that crosses the high threshold:</p>
<ul>
<li>Operation 3
<ul>
<li>source=<em>null</em></li>
<li>Account Merge -&gt; &#x201C;Anush_account&#x201D;</li>
</ul>
</li>
</ul>

      <br>
      <a href="https://github.com/payshares/docs/blob/master/guides/concepts/operations.md" class="spu-color-neutral6">Edit this doc in GitHub</a>
    </s-read-md>
  
  </div>
</div>
</div>

<div class="so-back spu-borderTop-1 spu-borderColor-neutral7 spu-padTB-15">
  <div class="so-chunk">
    <div class="siteFooter">
      <div class="siteFooter__list">
        <a class="siteFooter__list__item" href="https://www.payshares.org/"><span class="graphic-backArrow-9"></span>&#xA0;&#xA0;Payshares.org</a>
        <span class="siteFooter__list__sep">|</span>
        <a class="siteFooter__list__item" href="https://www.payshares.org/bug-bounty-program/">Bug Bounty</a>
        <a class="siteFooter__list__item" href="/payshares-core/software/admin.html">Run a node</a>
        <a class="siteFooter__list__item" href="/guides/things-to-build.html">Build an app</a>
        <a class="siteFooter__list__item" href="https://github.com/payshares/">GitHub</a>
        <a class="siteFooter__list__item" href="http://slack.payshares.org/">Community chat</a>
      </div>
      <div class="siteFooter__list siteFooter__list--aux">
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.payshares.org/terms-of-service/">Terms of service</a>
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.payshares.org/privacy-policy/">Privacy policy</a>
      </div>
    </div>
  </div>
</div>
</body>
<script src="/js/app-29e9eab4c89c33d7fb1e0705ca62d0cc.js"></script>
<script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load("U8cLXTFMPm");
analytics.page()
}}();
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5V3WNNP');</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V3WNNP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
</html>
