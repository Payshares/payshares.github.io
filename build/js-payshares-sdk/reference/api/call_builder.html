<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!--

  Want to contribute to this site? Take a look at the GitHub repository for this
  site: https://github.com/payshares/developers

  -->
  <title>CallBuilder - JS Payshares SDK | Payshares Developers</title>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <meta name="author" content="Payshares.org and contributors">

  <meta property="og:title" content="CallBuilder - JS Payshares SDK | Payshares Developers">
  <meta property="og:type" content="website">


  <link rel="stylesheet" href="/styles/index-642cd6cc68250700f4daa5029026a066.css">

  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/rocket-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/rocket-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/rocket-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicon/rocket-96x96.png" sizes="96x96">
  <meta name="msapplication-TileImage" content="/images/favicon/rocket-144x144.png">

  <script type="text/javascript">
    var $mcGoal = {'settings':{'uuid':'c001d97369b7a10d224c23867','dc':'us9'}};
    (function() {
      var sp = document.createElement('script'); sp.type = 'text/javascript'; sp.async = true; sp.defer = true;
      sp.src = ('https:' == document.location.protocol ? 'https://s3.amazonaws.com/downloads.mailchimp.com' : 'http://downloads.mailchimp.com') + '/js/goal.min.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sp, s);
    })();
  </script>

  <script>window.clientData = {};</script>

  <script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName("script")[0];
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
</head>
<body>
<div class="header2016">
  <div class="header2016__logo header2016__logo--spaced">
    <div class="so-siteHeader">
      <span class="so-logo">
  <a href="https://www.payshares.org/" class="so-logo__main">Payshares</a><!--
  --><span class="so-logo__separator"> </span><!--
  --><a href="/" class="so-logo__subSite">developers</a>
</span>
    </div>
  </div>
  <nav class="header2016__nav mainNavMenu spu-padStart-30">
    <a class="mainNavMenu__item " href="/guides/">Guides</a>
<a class="mainNavMenu__item is-currentItem" href="/reference/">API Reference</a>
<a class="mainNavMenu__item " href="/software/">Software</a>
<a class="mainNavMenu__item " href="/tools/">Tools</a>
  </nav>
</div>

<div class="S-flex-row">
  <div class="siteSidebar pageNavListBounder">
  <div class="mainSidebar">
    <ul class="pageNavList">


      <li class="pageNavList__subList collapsibleListSet js-collapsibleListSet">
        <span class="pageNavList__title collapsibleListSet__label js-collapsibleListSet__label">REST API</span>
        <ul class="collapsibleListSet__list js-collapsibleListSet__list is-collapsed">
                    <li class="pageNavList__item"><a href="/horizon/reference/index.html">Overview</a></li>
          <li class="pageNavList__item"><a href="/horizon/reference/admin.html">Administration</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors.html">Errors</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/paging.html">Paging</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/rate-limiting.html">Rate Limiting</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/responses.html">Response Format</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/xdr.html">XDR</a></li>
        
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Tutorials</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/horizon/reference/tutorials/follow-received-payments.html">Follow Received Payments</a></li>

        </ul>
      </li>
            
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Endpoints</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/horizon/reference/endpoints/accounts-single.html">Account Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/data-for-account.html">Data for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-all.html">All Effects</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-account.html">Effects for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-ledger.html">Effects for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-operation.html">Effects for Operation</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/effects-for-transaction.html">Effects for Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/ledgers-all.html">All Ledgers</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/ledgers-single.html">Ledger Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/offers-for-account.html">Offers for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-all.html">All Operations</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-for-account.html">Operations for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-for-ledger.html">Operations for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-for-transaction.html">Operations for Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/operations-single.html">Operation Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/orderbook-details.html">Orderbook Details</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/path-finding.html">Find Payment Paths</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-all.html">All Payments</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-for-account.html">Payments for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-for-ledger.html">Payments for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/payments-for-transaction.html">Payments for Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/trades-for-orderbook.html">Trades for Orderbook</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-all.html">All Transactions</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-create.html">Post Transaction</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-for-account.html">Transactions for Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-for-ledger.html">Transactions for Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/endpoints/transactions-single.html">Transaction Details</a></li>

        </ul>
      </li>
            
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Resources</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/horizon/reference/resources/account.html">Account</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/data.html">Data</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/effect.html">Effect</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/ledger.html">Ledger</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/offer.html">Offer</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/operation.html">Operation</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/orderbook.html">Orderbook</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/page.html">Page</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/path.html">Payment Path</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/trade.html">Trade</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/resources/transaction.html">Transaction</a></li>

        </ul>
      </li>
            
      <li class="pageNavList__subList">
        <span class="pageNavList__title">Errors</span>
        <ul class="collapsibleListSet__list">
              <li class="pageNavList__item"><a href="/horizon/reference/errors/bad-request.html">Bad Request</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/before-history.html">Before History</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/forbidden.html">Forbidden</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/not-acceptable.html">Not Acceptable</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/not-found.html">Not Found</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/not-implemented.html">Not Implemented</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/rate-limit-exceeded.html">Rate Limit Exceeded</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/server-error.html">Internal Server Error</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/stale-history.html">Stale History</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/transaction-failed.html">Transaction Failed</a></li>
  <li class="pageNavList__item"><a href="/horizon/reference/errors/transaction-malformed.html">Transaction Malformed</a></li>

        </ul>
      </li>
    
        </ul>
      </li>
    

      <li class="pageNavList__subList collapsibleListSet js-collapsibleListSet">
        <span class="pageNavList__title collapsibleListSet__label js-collapsibleListSet__label">JavaScript SDK</span>
        <ul class="collapsibleListSet__list js-collapsibleListSet__list is-collapsed">
                    <li class="pageNavList__item"><a href="/js-payshares-sdk/reference/index.html">Overview</a></li>
          <li class="pageNavList__item"><a href="/js-payshares-base/reference/base-examples.html">Transaction Examples</a></li>
  <li class="pageNavList__item"><a href="/js-payshares-base/reference/building-transactions.html">Building Transactions</a></li>
          <li class="pageNavList__item"><a href="/js-payshares-sdk/reference/examples.html">Basic Examples</a></li>
        <li class="pageNavList__item"><a href="https://payshares.github.io/js-payshares-sdk/" target="_blank" rel="noopener noreferrer">API Reference <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>

        </ul>
      </li>
    

      <li class="pageNavList__subList collapsibleListSet js-collapsibleListSet">
        <span class="pageNavList__title collapsibleListSet__label js-collapsibleListSet__label">Go SDK</span>
        <ul class="collapsibleListSet__list js-collapsibleListSet__list is-collapsed">
                                  <li class="pageNavList__item"><a href="https://godoc.org/github.com/payshares/go" target="_blank">Godoc <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>

        </ul>
      </li>
    

      <li class="pageNavList__item"><a href="https://github.com/payshares/java-payshares-sdk" target="_blank" rel="noopener noreferrer">Java SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>
      <li class="pageNavList__item"><a href="https://github.com/payshares/ruby-payshares-sdk" target="_blank" rel="noopener noreferrer">Ruby SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>
      <li class="pageNavList__item"><a href="https://github.com/PaysharesCN/py-payshares-base" target="_blank" rel="noopener noreferrer">Python SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>
      <li class="pageNavList__item"><a href="https://github.com/QuantozTechnology/csharp-payshares-base" target="_blank" rel="noopener noreferrer">C# SDK <span class="icon-faSvg icon-faSvg--small icon-faSvg-external-neutral5"></span></a></li>

    </ul>
  </div>
</div>
  <div class="S-flexItem-share">
  <div class="spu-padSE-30">
    <h1 class="mainSectionTitle">
      CallBuilder
      &#xA0;<span class="spu-color-neutral6">[JS Payshares SDK]</span>
    </h1>
  </div>
  <div class="S-flex-rowWrap spu-borderTop-1 spu-borderColor-neutral7">
    <s-read-md class="S-flexItem-share mainContent s-read-md--capped spu-padSE-30 spu-padTB-20 documentRead" link-process-md>
      <h2 id="overview"><a class="anchorShortcut" href="#overview" aria-hidden="true"></a> Overview</h2>
<p><code>CallBuilder</code> is a class that allows specificity and flexibility when querying the Horizon server.  By using the <a href="https://en.wikipedia.org/wiki/Builder_pattern">Builder Pattern</a>, <code>CallBuilder</code> provides methods that can be chained together to generate a query.</p>
<h2 id="options"><a class="anchorShortcut" href="#options" aria-hidden="true"></a> Options</h2>
<table>
<thead>
<tr>
<th>Method</th>
<th>Param Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>limit(limit)</code></td>
<td><code>integer</code></td>
<td>Limits the number of returned resources to the given <code>limit</code>.</td>
</tr>
<tr>
<td><code>cursor(&quot;token&quot;)</code></td>
<td><code>string</code></td>
<td>Return only resources after the given paging token.</td>
</tr>
<tr>
<td><code>order({&quot;asc&quot; or &quot;desc&quot;})</code></td>
<td><code>string</code></td>
<td>Order the returned collection in &#x201C;asc&#x201D; or &#x201C;desc&#x201D; order.</td>
</tr>
<tr>
<td><code>call()</code></td>
<td></td>
<td>Triggers a HTTP Request to the Horizon server based on the builder&#x2019;s current configuration.  Returns a <code>Promise</code> that resolves to the server&#x2019;s response.  For more on <code>Promise</code>, see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">these docs</a>.</td>
</tr>
<tr>
<td><code>stream({options})</code></td>
<td>object of <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource#Properties">properties</a></td>
<td>Creates an <code>EventSource</code> that listens for incoming messages from the server.  URL based on builder&#x2019;s current configuration.  For more on <code>EventSource</code>, see <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource">these docs</a>.</td>
</tr>
</tbody>
</table>
<h2 id="examples"><a class="anchorShortcut" href="#examples" aria-hidden="true"></a> Examples</h2>
<p>Let&#x2019;s say you want to look at 20 transactions for an account with the address &#x201C;GSDEF&#x201D;.  You don&#x2019;t want the latest 20; instead, you want the 20 after the paging token &#x201C;2354-4&#x201D;.  Finally, you want the server response to be returned in the form of a <code>Promise</code>.</p>
<p>So, you take the <a href="./server.html"><code>server</code> object</a> and start with</p>
<pre><code>server.transactions()
</code></pre>
<p>which returns a <code>TransactionCallBuilder</code>, an extension of the <code>CallBuilder</code> class.</p>
<p>Then you specify the address you want with <code>.forAccount()</code>, a method provided by <code>TransactionCallBuilder</code>.</p>
<pre><code>server.transactions()
  .forAccount(&quot;GSDEF&quot;)
</code></pre>
<p>You want only 20 transactions, so you can chain <code>.limit(&quot;20&quot;)</code>.  But you also want only transactions after a particular paging token, so you add <code>.cursor(&quot;2354-4&quot;)</code>.  Order doesn&#x2019;t matter with the <code>limit()</code>, <code>cursor()</code>, and <code>order()</code> methods.</p>
<pre><code>server.transactions()
  .forAccount(&quot;GSDEF&quot;)
  .limit(&quot;20&quot;)
  .cursor(&quot;2354-4&quot;)
</code></pre>
<p>Finally, you want to trigger a HTTP request.  Only <code>call()</code> and <code>stream(options)</code> does that.  You want the result to be a <code>Promise</code>, so you choose <code>call()</code>.</p>
<pre><code>server.transactions()
  .forAccount(&quot;GSDEF&quot;)
  .limit(&quot;20&quot;)
  .cursor(&quot;2354-4&quot;)
  .call()
</code></pre>

      <br>
      <a href="https://github.com/payshares/js-payshares-sdk/blob/master/docs/reference/api/call_builder.md" class="spu-color-neutral6">Edit this doc in GitHub</a>
    </s-read-md>
    <s-read-md class="endpointRef-exampleBar spu-background-neutral2 spu-color-neutral9 js-endpointRef-exampleBar">
      <nav class="s-buttonList js-endpointRef-menu"></nav>

      <div class="endpointRef-exampleRequest spu-padTop-20 js-endpointRef-exampleRequest"></div>
      <div class="endpointRef-exampleResponse spu-padTop-20 js-endpointRef-exampleResponse"></div>
    </s-read-md>
  
  </div>
</div>
</div>

<div class="so-back spu-borderTop-1 spu-borderColor-neutral7 spu-padTB-15">
  <div class="so-chunk">
    <div class="siteFooter">
      <div class="siteFooter__list">
        <a class="siteFooter__list__item" href="https://www.payshares.org/"><span class="graphic-backArrow-9"></span>&#xA0;&#xA0;Payshares.org</a>
        <span class="siteFooter__list__sep">|</span>
        <a class="siteFooter__list__item" href="https://www.payshares.org/bug-bounty-program/">Bug Bounty</a>
        <a class="siteFooter__list__item" href="/payshares-core/software/admin.html">Run a node</a>
        <a class="siteFooter__list__item" href="/guides/things-to-build.html">Build an app</a>
        <a class="siteFooter__list__item" href="https://github.com/payshares/">GitHub</a>
        <a class="siteFooter__list__item" href="http://slack.payshares.org/">Community chat</a>
      </div>
      <div class="siteFooter__list siteFooter__list--aux">
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.payshares.org/terms-of-service/">Terms of service</a>
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.payshares.org/privacy-policy/">Privacy policy</a>
      </div>
    </div>
  </div>
</div>
</body>
<script src="/js/app-29e9eab4c89c33d7fb1e0705ca62d0cc.js"></script>
<script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load("U8cLXTFMPm");
analytics.page()
}}();
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5V3WNNP');</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V3WNNP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
</html>
