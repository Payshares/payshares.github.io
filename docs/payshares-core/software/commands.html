<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!--

  Want to contribute to this site? Take a look at the GitHub repository for this
  site: https://github.com/payshares/developers

  -->
  <title>Commands - Payshares Core | Payshares Developers</title>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <meta name="author" content="Payshares.org and contributors">

  <meta property="og:title" content="Commands - Payshares Core | Payshares Developers">
  <meta property="og:type" content="website">


  <link rel="stylesheet" href="/styles/index-642cd6cc68250700f4daa5029026a066.css">

  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/rocket-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/rocket-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/rocket-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicon/rocket-96x96.png" sizes="96x96">
  <meta name="msapplication-TileImage" content="/images/favicon/rocket-144x144.png">

  <script type="text/javascript">
    var $mcGoal = {'settings':{'uuid':'c001d97369b7a10d224c23867','dc':'us9'}};
    (function() {
      var sp = document.createElement('script'); sp.type = 'text/javascript'; sp.async = true; sp.defer = true;
      sp.src = ('https:' == document.location.protocol ? 'https://s3.amazonaws.com/downloads.mailchimp.com' : 'http://downloads.mailchimp.com') + '/js/goal.min.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sp, s);
    })();
  </script>

  <script>window.clientData = {};</script>

  <script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName("script")[0];
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
</head>
<body>
<div class="header2016">
  <div class="header2016__logo header2016__logo--spaced">
    <div class="so-siteHeader">
      <span class="so-logo">
  <a href="https://www.payshares.org/" class="so-logo__main">Payshares</a><!--
  --><span class="so-logo__separator"> </span><!--
  --><a href="/" class="so-logo__subSite">developers</a>
</span>
    </div>
  </div>
  <nav class="header2016__nav mainNavMenu spu-padStart-30">
    <a class="mainNavMenu__item " href="/guides/">Guides</a>
<a class="mainNavMenu__item " href="/reference/">API Reference</a>
<a class="mainNavMenu__item is-currentItem" href="/software/">Software</a>
<a class="mainNavMenu__item " href="/tools/">Tools</a>
  </nav>
</div>

<div class="S-flex-row">
  <div class="siteSidebar pageNavListBounder">
  <div class="mainSidebar">
    <ul class="pageNavList">

      <li class="pageNavList__subList">
        <span class="pageNavList__title">Payshares Core</span>
        <ul class="collapsibleListSet__list">
                    <li class="pageNavList__item"><a href="/payshares-core/software/admin.html">Administration</a></li>
  <li class="pageNavList__item is-currentItem"><a href="/payshares-core/software/commands.html">Commands</a></li>
  <li class="pageNavList__item"><a href="/payshares-core/software/testnet.html">Testnet</a></li>
          <li class="pageNavList__item"><a href="/payshares-core/software/core-data-flow.pdf">Core Data Flow</a></li>

        </ul>
      </li>
    
      <li class="pageNavList__item"><a href="https://github.com/payshares/payshares-go/tree/master/services/federation">Federation Server</a></li>
      <li class="pageNavList__item"><a href="https://github.com/payshares/bridge-server">Bridge Server</a></li>
      <li class="pageNavList__item"><a href="https://github.com/payshares/payshares-go/tree/master/tools/payshares-archivist">Archivist</a></li>
      <li class="pageNavList__item"><a href="https://github.com/payshares/horizon">Horizon</a></li>
    </ul>
  </div>
</div>
  <div class="S-flexItem-share">
  <div class="spu-padSE-30">
    <h1 class="mainSectionTitle">
      Commands
      &#xA0;<span class="spu-color-neutral6">[Payshares Core]</span>
    </h1>
  </div>
  <div class="S-flex-rowWrap spu-borderTop-1 spu-borderColor-neutral7">
    <s-read-md class="S-flexItem-share mainContent s-read-md--capped spu-padSE-30 spu-padTB-20 documentRead" link-process-md>
      <p>payshares-core can be controlled via the following commands.</p>
<h2 id="command-line-options"><a class="anchorShortcut" href="#command-line-options" aria-hidden="true"></a> Command line options</h2>
<ul>
<li><strong>&#x2013;?</strong> or <strong>&#x2013;help</strong>: Print the available command line options and then exit&#x2026;</li>
<li><strong>&#x2013;c</strong> Send an <a href="#HTTP-Commands">HTTP command</a> to an already running local instance of payshares-core and then exit. For example:</li>
</ul>
<p><code>$ payshares-core -c info</code></p>
<ul>
<li><strong>&#x2013;conf FILE</strong>: Specify a config file to use. You can use &#x2018;-&#x2019; and provide the config file via STDIN. <em>default &#x2018;payshares-core.cfg&#x2019;</em></li>
<li><strong>&#x2013;convertid ID</strong>: Will output the passed ID in all known forms and then exit. Useful for determining the public key that corresponds to a given private key. For example:</li>
</ul>
<p><code>$ payshares-core --convertid SDQVDISRYN2JXBS7ICL7QJAEKB3HWBJFP2QECXG7GZICAHBK4UNJCWK2</code></p>
<ul>
<li><strong>&#x2013;dumpxdr FILE</strong>:  Dumps the given XDR file and then exits.</li>
<li><strong>&#x2013;loadxdr FILE</strong>:  Load an XDR bucket file, for testing.</li>
<li><strong>&#x2013;forcescp</strong>: This command is used to start a network from scratch or when a
network has lost quorum because of failed nodes or otherwise. It sets a flag in
the database. The next time payshares-core is run, payshares-core will start
emitting SCP messages based on its last known ledger. Without this flag payshares-core waits to hear
a ledger close from the network before starting SCP.<br>
forcescp doesn&#x2019;t change the requirements for quorum so although this node will emit SCP messages SCP won&#x2019;t complete until there are also a quorum of other nodes also emitting SCP messages on this same ledger.</li>
<li><strong>&#x2013;fuzz FILE</strong>: Run a single fuzz input and exit.</li>
<li><strong>&#x2013;genfuzz FILE</strong>:  Generate a random fuzzer input file.</li>
<li><strong>&#x2013;genseed</strong>: Generate and print a random public/private key and then exit.</li>
<li><strong>&#x2013;inferquorum</strong>:   Print a potential quorum set inferred from history.</li>
<li><strong>&#x2013;checkquorum</strong>:   Check quorum intersection from history to ensure there is closure over all the validators in the network.</li>
<li><strong>&#x2013;graphquorum</strong>:   Print a quorum set graph from history.</li>
<li><strong>&#x2013;offlineinfo</strong>: Returns an output similar to <code>--c info</code> for an offline instance</li>
<li><strong>&#x2013;ll LEVEL</strong>: Set the log level. It is redundant with <code>--c ll</code> but we need this form if you want to change the log level during test runs.</li>
<li><strong>&#x2013;metric METRIC</strong>: Report metric METRIC on exit. Used for gathering a metric cumulatively during a test run.</li>
<li><strong>&#x2013;newdb</strong>: Clears the local database and resets it to the genesis ledger. If you connect to the network after that it will catch up from scratch.</li>
<li><strong>&#x2013;newhist ARCH</strong>:  Initialize the named history archive ARCH. ARCH should be one of the history archives you have specified in the payshares-core.cfg. This will write a <code>.well-known/payshares-history.json</code> file in the archive root.</li>
<li><strong>&#x2013;printtxn FILE</strong>:  Pretty-print a binary file containing a
<code>TransactionEnvelope</code>.  If FILE is &#x201C;-&#x201D;, the transaction is read from
standard input.</li>
<li><strong>&#x2013;signtxn FILE</strong>:  Add a digital signature to a transaction
envelope stored in binary format in FILE, and send the result to
standard output (which should be redirected to a file or piped
through a tool such as <code>base64</code>).  The private signing key is read
from standard input, unless FILE is &#x201C;-&#x201D; in which case the
transaction envelope is read from standard input and the signing key
is read from <code>/dev/tty</code>.  In either event, if the signing key
appears to be coming from a terminal, payshares-core disables echo.
Note that if you do not have a PAYSHARES_NETWORK_ID environment
variable, then before this argument you must specify the --netid
option.</li>
<li><strong>&#x2013;base64</strong>: When preceding --printtxn or --signtxn, alters the
behavior of the option to work on base64-encoded XDR rather than
raw XDR.</li>
<li><strong>&#x2013;sec2pub</strong>:  Reads a secret key on standard input and outputs the
corresponding public key.  Both keys are in Payshares&#x2019;s standard
base-32 ASCII format.</li>
<li><strong>&#x2013;netid STRING</strong>:  The --signtxn option requires a particular
network to sign for.  For example, the production payshares network is
&quot;<code>Payshares Public Global Network ; September 2017</code>&quot; while the test
network is &#x201C;<code>Test SDF Network ; September 2015</code>&#x201D;.</li>
<li><strong>&#x2013;test</strong>: Run all the unit tests. For <a href="https://github.com/philsquared/Catch/blob/master/docs/command-line.md">further info</a> on possible options for test. For example this will run just the &#x201C;Herder&#x201D; tests and stop after the first failure: <code>payshares-core --test -a [Herder]</code></li>
<li><strong>&#x2013;version</strong>: Print version info and then exit.</li>
</ul>
<h2 id="http-commands"><a class="anchorShortcut" href="#http-commands" aria-hidden="true"></a> HTTP Commands</h2>
<p>By default payshares-core listens for connections from localhost on port 11757.
You can send commands to payshares-core via a web browser, curl, or using the --c
command line option (see above). Most commands return their results in JSON format.</p>
<ul>
<li>
<p><strong>help</strong>
Prints a list of currently supported commands.</p>
</li>
<li>
<p><strong>catchup</strong>
<code>/catchup?ledger=NNN[&amp;mode=MODE]</code><br>
Triggers the instance to catch up to ledger NNN from history;
Mode is either &#x2018;minimal&#x2019; (the default, if omitted) or &#x2018;complete&#x2019;.</p>
</li>
<li>
<p><strong>checkdb</strong>
Triggers the instance to perform a background check of the database&#x2019;s state.</p>
</li>
<li>
<p><strong>checkpoint</strong>
Triggers the instance to write an immediate history checkpoint. And uploads it to the archive.</p>
</li>
<li>
<p><strong>connect</strong>
<code>/connect?peer=NAME&amp;port=NNN</code><br>
Triggers the instance to connect to peer NAME at port NNN.</p>
</li>
<li>
<p><strong>dropcursor</strong><br>
<code>/dropcursor?id=XYZ</code><br>
deletes the tracking cursor with identified by <code>id</code>. See <code>setcursor</code> for more information.</p>
</li>
<li>
<p><strong>info</strong>
Returns information about the server in JSON format (sync
state, connected peers, etc).</p>
</li>
<li>
<p><strong>ll</strong><br>
<code>/ll?level=L[&amp;partition=P]</code><br>
Adjust the log level for partition P (or all if no partition is specified).
Level is one of FATAL, ERROR, WARNING, INFO, DEBUG, VERBOSE, TRACE</p>
</li>
<li>
<p><strong>maintenance</strong>
<code>/maintenance?[queue=true]</code><br>
Performs maintenance tasks on the instance.</p>
<ul>
<li><code>queue</code> performs deletion of queue data. See <code>setcursor</code> for more information.</li>
</ul>
</li>
<li>
<p><strong>metrics</strong>
Returns a snapshot of the metrics registry (for monitoring and
debugging purpose).</p>
</li>
<li>
<p><strong>peers</strong>
Returns the list of known peers in JSON format.</p>
</li>
<li>
<p><strong>quorum</strong>
<code>/quorum?[node=NODE_ID][&amp;compact=true]</code><br>
returns information about the quorum for node NODE_ID (this node by default).
NODE_ID is either a full key (<code>GABCD...</code>), an alias (<code>$name</code>) or
an abbreviated ID (<code>@GABCD</code>).
If compact is set, only returns a summary version.</p>
</li>
<li>
<p><strong>setcursor</strong>
<code>/setcursor?id=ID&amp;cursor=N</code><br>
sets or creates a cursor identified by <code>ID</code> with value <code>N</code>. ID is an uppercase AlphaNum, N is an uint32 that represents the last ledger sequence number that the instance ID processed.
Cursors are used by dependent services to tell payshares-core which data can be safely deleted by the instance.
The data is historical data stored in the SQL tables such as txhistory or ledgerheaders. When all consumers processed the data for ledger sequence N the data can be safely removed by the instance.
The actual deletion is performed by invoking the <code>maintenance</code> endpoint or on startup.
See also <code>dropcursor</code>.</p>
</li>
<li>
<p><strong>scp</strong>
`/scp?[limit=n]
Returns a JSON object with the internal state of the SCP engine for the last n (default 2) ledgers.</p>
</li>
<li>
<p><strong>tx</strong>
<code>/tx?blob=Base64</code><br>
submit a <a href="../../learn/concepts/transactions.html">transaction</a> to the network.
blob is a base64 encoded XDR serialized &apos;TransactionEnvelope&#x2019;
returns a JSON object with the following properties
status:</p>
<ul>
<li>&#x201C;PENDING&#x201D; - transaction is being considered by consensus</li>
<li>&#x201C;DUPLICATE&#x201D; - transaction is already PENDING</li>
<li>&#x201C;ERROR&#x201D; - transaction rejected by transaction engine
error: set when status is &#x201C;ERROR&#x201D;.
Base64 encoded, XDR serialized &#x2018;TransactionResult&#x2019;</li>
</ul>
</li>
<li>
<p><strong>upgrades</strong></p>
<ul>
<li><code>/upgrades?mode=get</code><br>
retrieves the currently configured upgrade settings<br></li>
<li><code>/upgrades?mode=clear</code><br>
clears any upgrade settings<br></li>
<li><code>/upgrades?mode=set&amp;upgradetime=DATETIME&amp;[basefee=NUM]&amp;[basereserve=NUM]&amp;[maxtxsize=NUM]&amp;[protocolversion=NUM]</code><br>
upgradetime is a required date (UTC) in the form 1970-01-01T00:00:00Z.<br>
<ul>
<li>fee (uint32) This is what you would prefer the base fee to be. It is
in stroops<br></li>
<li>basereserve (uint32) This is what you would prefer the base reserve
to be. It is in stroops.<br></li>
<li>maxtxsize (uint32) This defines the maximum number of transactions
to include in a ledger. When too many transactions are pending,
surge pricing is applied. The instance picks the top maxtxsize
transactions locally to be considered in the next ledger.Where
transactions are ordered by transaction fee(lower fee transactions
are held for later).<br></li>
<li>protocolversion (uint32) defines the protocol version to upgrade to.
When specified it must match the protocol version supported by the
node<br></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="the-following-http-commands-are-exposed-on-test-instances"><a class="anchorShortcut" href="#the-following-http-commands-are-exposed-on-test-instances" aria-hidden="true"></a> The following HTTP commands are exposed on test instances</h3>
<ul>
<li>
<p><strong>generateload</strong>
<code>/generateload[?accounts=N&amp;txs=M&amp;txrate=(R|auto)]</code><br>
Artificially generate load for testing; must be used with <code>ARTIFICIALLY_GENERATE_LOAD_FOR_TESTING</code> set to true.</p>
</li>
<li>
<p><strong>manualclose</strong>
If MANUAL_CLOSE is set to true in the .cfg file. This will cause the current ledger to close.</p>
</li>
<li>
<p><strong>testacc</strong>
<code>/testacc?name=N</code><br>
Returns basic information about the account identified by name. Note that N is a string used as seed, but &#x201C;root&#x201D; can be used as well to specify the root account used for the test instance.</p>
</li>
<li>
<p><strong>testtx</strong>
<code>/testtx?from=F&amp;to=T&amp;amount=N&amp;[create=true]</code><br>
Injects a payment transaction (or a create transaction if &#x201C;create&#x201D; is specified) from the account F to the account T, sending N XPS to the account.
Note that F and T are seed strings but can also be specified as &#x201C;root&#x201D; as a shorthand for the root account for the test instance.</p>
</li>
</ul>

      <br>
      <a href="https://github.com/payshares/payshares-core/blob/master/docs/software/commands.md" class="spu-color-neutral6">Edit this doc in GitHub</a>
    </s-read-md>
  
  </div>
</div>
</div>

<div class="so-back spu-borderTop-1 spu-borderColor-neutral7 spu-padTB-15">
  <div class="so-chunk">
    <div class="siteFooter">
      <div class="siteFooter__list">
        <a class="siteFooter__list__item" href="https://www.payshares.org/"><span class="graphic-backArrow-9"></span>&#xA0;&#xA0;Payshares.org</a>
        <span class="siteFooter__list__sep">|</span>
        <a class="siteFooter__list__item" href="https://www.payshares.org/bug-bounty-program/">Bug Bounty</a>
        <a class="siteFooter__list__item" href="/payshares-core/software/admin.html">Run a node</a>
        <a class="siteFooter__list__item" href="/guides/things-to-build.html">Build an app</a>
        <a class="siteFooter__list__item" href="https://github.com/payshares/">GitHub</a>
        <a class="siteFooter__list__item" href="http://slack.payshares.org/">Community chat</a>
      </div>
      <div class="siteFooter__list siteFooter__list--aux">
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.payshares.org/terms-of-service/">Terms of service</a>
        <a class="siteFooter__list__item siteFooter__list__item--aux" href="https://www.payshares.org/privacy-policy/">Privacy policy</a>
      </div>
    </div>
  </div>
</div>
</body>
<script src="/js/app-29e9eab4c89c33d7fb1e0705ca62d0cc.js"></script>
<script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load("U8cLXTFMPm");
analytics.page()
}}();
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5V3WNNP');</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V3WNNP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
</html>
